#!/bin/bash
set -e

echo "ğŸ“‚ Erstelle Installationsverzeichnis..."
mkdir -p /usr/lib/container-manager/
mkdir -p /usr/local/bin/

echo "ğŸ“‚ PrÃ¼fe, ob requirements.txt existiert..."
if [ ! -f "/usr/lib/container-manager/requirements.txt" ]; then
    echo "ğŸš¨ ERROR: /usr/lib/container-manager/requirements.txt nicht gefunden!"
    ls -lah /usr/lib/container-manager/  # Debugging
    exit 1
fi

echo "ğŸ“‚ Installiere AbhÃ¤ngigkeiten direkt ins System-Python..."
pip3 install --upgrade pip
pip3 install -r /usr/lib/container-manager/requirements.txt

# ğŸš€ Stelle sicher, dass `netzint-cli` in `/usr/local/bin/` installiert wird
echo "ğŸ“‚ ÃœberprÃ¼fe, ob netzint-cli in /usr/local/bin/ vorhanden ist..."
if [ ! -f "/usr/local/bin/netzint-cli" ]; then
    echo "ğŸš¨ Datei nicht gefunden! Manuelles Kopieren..."
    cp -f /usr/lib/container-manager/netzint-cli /usr/local/bin/netzint-cli
fi

echo "ğŸ“‚ Setze Berechtigungen fÃ¼r netzint-cli..."
chmod +x /usr/local/bin/netzint-cli

echo "ğŸ“‚ PrÃ¼fe, ob die Datei jetzt existiert..."
ls -lah /usr/local/bin/netzint-cli || echo "ğŸš¨ Datei wurde nicht kopiert!"

echo "ğŸ“‚ Installation abgeschlossen!"
